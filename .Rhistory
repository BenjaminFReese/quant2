Age51to64 <- c(32, 30)
Over65 <- c(28, 20)
age_groups <- cbind(Age18to29, Age36to50, Age51to64, Over65)
barplot(age_groups, beside=T, xlab="Age Group", names.arg=
c("18 - 29", "36 - 50", "51 - 64", "65+"), ylab="Percent",
main = "Percent Surveyed and Percent in Population by Age Group",
ylim = c(0,35), las=1)
legend("bottomleft",c("Surveyed %", "Population %"),
fill=c("black", "light gray"), horiz=FALSE, cex=0.73, bg="white")
df %>%
mutate(Population = popPct, Survey = svyPct) %>%
dplyr::select(-popPct, -svyPct) %>%
pivot_longer(-age, names_to="Group", values_to="Percent") %>%
ggplot(aes(x=age, y=Percent, fill=Group)) +
geom_bar(stat="identity", position="dodge") +
scale_fill_grey() +
theme_minimal() +
labs(x = "Age Group", y = "Percent",
title = "Population and Survey Sample Proportions by Age Group")
df %>%
mutate(Population = popPct, Survey = svyPct) %>%
dplyr::select(-popPct, -svyPct) %>%
pivot_longer(-age, names_to="Group", values_to="Percent") %>%
ggplot(aes(x=age, y=Percent, fill=Group)) +
geom_bar(stat="identity", position="dodge") +
coord_flip() +
scale_fill_grey() +
theme_minimal() +
labs(x = "Age Group", y = "Percent",
title = "Population and Survey Sample Proportions by Age Group")
df %>%
mutate(Population = popPct, Survey = svyPct) %>%
dplyr::select(-popPct, -svyPct) %>%
pivot_longer(-age, names_to="Group", values_to="Percent") %>%
ggplot(aes(x=age, y=Percent, fill=Group)) +
geom_bar(stat="identity", position="dodge") +
scale_fill_grey() +
theme_minimal() +
labs(x = "Age Group", y = "Percent",
title = "Population and Survey Sample Proportions by Age Group")
df %>%
mutate(Population = popPct, Survey = svyPct) %>%
dplyr::select(-popPct, -svyPct) %>%
pivot_longer(-age, names_to="Group", values_to="Percent") %>%
ggplot(aes(x=age, y=Percent, fill=Group)) +
geom_bar(stat="identity", position="dodge") +
coord_flip() +
scale_fill_grey() +
theme_minimal() +
labs(x = "Age Group", y = "Percent",
title = "Population and Survey Sample Proportions by Age Group")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
# Load packages used in this session of R
library(knitr)
library(tidyverse)
library(ggplot2)
opts_chunk$set(echo = TRUE)
options(digits = 2)
df <- data.frame("age" = c("18 to 29", "36 to 50", "51 to 64", "65+"),
"popPct" = c(29, 21, 30, 20),
"svyPct" = c(19, 21, 32, 28))
kable(df, caption = "Table: Population and survey percentages by age group")
Age18to29 <- c(19, 29)
Age36to50 <- c(21, 21)
Age51to64 <- c(32, 30)
Over65 <- c(28,20)
age_groups <- cbind(Age18to29, Age36to50, Age51to64, Over65)
barplot(age_groups, beside=T, xlab = "Age Group", ylab = "Percent",
main = "Percent Surveyed and Percent in Population by Age Group",
ylim = c(0,35), las=1)
legend("bottomleft", c("Surveyed %", "Population %"),
fill=c("black", "light gray"), horiz =FALSE, cex = 0.73, bg="white")
df %>%
mutate(Population = popPct, Survey = svyPct) %>%
dplyr::select(-popPct, -svyPct) %>%
pivot_longer(-age, names_to="Group", values_to="Percent") %>%
ggplot(aes(x=age, y=Percent, fill=Group)) +
geom_bar(stat="identity", position="dodge") +
scale_fill_grey() +
theme_minimal() +
labs(x = "Age Group", y = "Percent",
title = "Population and Survey Sample Proportions by Age Group")
df %>%
mutate(Population = popPct, Survey = svyPct) %>%
dplyr::select(-popPct, -svyPct) %>%
pivot_longer(-age, names_to="Group", values_to="Percent") %>%
ggplot(aes(x=age, y=Percent, fill=Group)) +
geom_bar(stat="identity", position="dodge") +
scale_fill_brewer(palette = "Purples") +
theme_classic() +
labs(x = "Age Group", y = "Percent",
title = "Population and Survey Sample Proportions by Age Group")
Age18to29 <- c(19, 29)
Age36to50 <- c(21, 21)
Age51to64 <- c(32, 30)
Over65 <- c(28,20)
age_groups <- cbind(Age18to29, Age36to50, Age51to64, Over65)
barplot(age_groups, beside=T, xlab = "Age Group", ylab = "Percent",
main = "Percent Surveyed and Percent in Population by Age Group",
ylim = c(0,35), las=1)
legend("bottomleft", c("Surveyed %", "Population %"),
fill=c("black", "light gray"), horiz =FALSE, cex = 0.73, bg="white")
df %>%
mutate(Population = popPct, Survey = svyPct) %>%
dplyr::select(-popPct, -svyPct) %>%
pivot_longer(-age, names_to="Group", values_to="Percent") %>%
ggplot(aes(x=age, y=Percent, fill=Group)) +
geom_bar(stat="identity", position="dodge") +
scale_fill_grey() +
theme_minimal() +
labs(x = "Age Group", y = "Percent",
title = "Population and Survey Sample Proportions by Age Group")
df %>%
mutate(Population = popPct, Survey = svyPct) %>%
dplyr::select(-popPct, -svyPct) %>%
pivot_longer(-age, names_to="Group", values_to="Percent") %>%
ggplot(aes(x=age, y=Percent, fill=Group)) +
geom_bar(stat="identity", position="dodge") +
scale_fill_brewer(palette = "Purples") +
theme_classic() +
labs(x = "Age Group", y = "Percent",
title = "Population and Survey Sample Proportions by Age Group")
knitr::include_graphics("lab5_image.png")
# Setup
rm(list = ls(all = TRUE))   # Removes objects from the previous session
## Packages
library(haven)  ## Package to read Stata data
library(ivreg) ## Package to run 2sls
library(fixest) ## This package can also run 2SLS
library(tidyverse) ## For tidyverse commands
## Loading Data
hajj_public <- read_dta("Data/hajj_public.dta")
## Loop
## DVs
dvs <- c("hajj_public$x_s10bq4", "hajj_public$x_s7q12a", "hajj_public$x_s7q1",
"hajj_public$x_s3q3", "hajj_public$x_s10eq2", "hajj_public$x_s10dq1")
## Loop
for(i in 1:length(dvs)){
model <- paste("model",i, sep="")
m <- ivreg(as.formula(paste(dvs[i],"~hajj2006 + age + literate + ptygrp +
female + urban | success + age + literate + ptygrp + female + urban")), data=hajj_public)
assign(model,m)}
## Loop
## DVs
dvs <- c("hajj_public$x_s10bq4", "hajj_public$x_s7q12a", "hajj_public$x_s7q1",
"hajj_public$x_s3q3", "hajj_public$x_s10eq2", "hajj_public$x_s10dq1")
## Loop
for(i in 1:length(dvs)){
model <- paste("model",i, sep="")
m <- ivreg(as.formula(paste(dvs[i],"~hajj2006 + age + literate + ptygrp +
female + urban | success + age + literate + ptygrp + female + urban")), data=hajj_public)
assign(model,m)}
bookdown::render_book("index.Rmd", "bookdown::gitbook")
## With library(ivreg)
hajj_public %>%
ivreg(x_s14aq10~hajj2006 | success, data=.) %>%
broom::tidy()
## With library(fixest)
hajj_public %>%
feols(x_s14aq10 ~ 1 | hajj2006~success, data=., vcov = "iid")
## With library(ivreg)
hajj_public %>%
ivreg(x_s14aq10~hajj2006 | success, data=.) %>%
broom::tidy()
## With library(fixest)
hajj_public %>%
feols(x_s14aq10 ~ 1 | hajj2006~success, data=., vcov = "iid")
hajj_public %>%
feols(x_s14aq10~age + literate + ptygrp + female + urban |
hajj2006 ~ success + age + literate + ptygrp + female + urban,
data=., vcov = "iid")
hajj_public %>%
ivreg(x_s14aq10~hajj2006 + age + literate + ptygrp + female + urban |
success + age + literate + ptygrp + female + urban, data=.)
hajj_public %>%
ivreg(x_s14aq10~hajj2006 + age + literate + ptygrp + female + urban |
success + age + literate + ptygrp + female + urban, data=.) %>%
summary()
hajj_public %>%
ivreg(x_s14aq10~hajj2006 + age + literate + ptygrp + female + urban |
success + age + literate + ptygrp + female + urban, data=.) %>%
summary(diagnostics=TRUE)
## With library(fixest)
hajj_public %>%
feols(x_s14aq10 ~ 1 | hajj2006~success, data=., vcov = "iid") %>%
broom::tidy()
hajj_public %>%
feols(x_s14aq10~age + literate + ptygrp + female + urban |
hajj2006 ~ success + age + literate + ptygrp + female + urban,
data=., vcov = "iid") %>%
broom::tidy()
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
library(memisc) ## For table outputting
bookdown::render_book("index.Rmd", "bookdown::gitbook")
table(model1, model2, model3, model4, model5, model6)
## Loop
## DVs
dvs <- c("hajj_public$x_s10bq4", "hajj_public$x_s7q12a", "hajj_public$x_s7q1",
"hajj_public$x_s3q3", "hajj_public$x_s10eq2", "hajj_public$x_s10dq1")
## Loop
for(i in 1:length(dvs)){
model <- paste("model",i, sep="")
m <- ivreg(as.formula(paste(dvs[i],"~hajj2006 + age + literate + ptygrp +
female + urban | success + age + literate + ptygrp + female + urban")), data=hajj_public)
assign(model,m)}
table(model1, model2, model3, model4, model5, model6)
mtable(model1, model2, model3, model4, model5, model6)
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
## Loop
## DVs
dvs <- c("hajj_public$x_s10bq4", "hajj_public$x_s7q12a", "hajj_public$x_s7q1",
"hajj_public$x_s3q3", "hajj_public$x_s10eq2", "hajj_public$x_s10dq1")
## Loop
for(i in 1:length(dvs)){
model <- paste("model",i, sep="")
m <- ivreg(as.formula(paste(dvs[i],"~hajj2006 + age + literate + ptygrp +
female + urban | success + age + literate + ptygrp + female + urban")), data=hajj_public)
assign(model,m)}
mtable(model1, model2, model3, model4, model5, model6)
bookdown::render_book("index.Rmd", "bookdown::gitbook")
## OssamaIncorrect
hajj_public %>%
ivreg(x_s10bq4~hajj2006 + age + literate + ptygrp + female + urban | success +
age + literate + ptygrp + female + urban, data=.) %>%
broom::tidy()
## GovtForce
hajj_public %>%
ivreg(x_s7q12a~hajj2006 + age + literate + ptygrp + female + urban | success +
age + literate + ptygrp + female + urban, data=.) %>%
broom::tidy()
## NatlInterest
hajj_public %>%
ivreg(x_s7q1~hajj2006 + age + literate + ptygrp + female + urban | success +
age + literate + ptygrp + female + urban, data=.) %>%
broom::tidy()
## Happy
hajj_public %>%
ivreg(x_s3q3~hajj2006 + age + literate + ptygrp + female + urban | success +
age + literate + ptygrp + female + urban, data=.) %>%
broom::tidy()
## Girl School
hajj_public %>%
ivreg(x_s10eq2~hajj2006 + age + literate + ptygrp + female + urban | success +
age + literate + ptygrp + female, data=.) %>%
broom::tidy()
## Jobs Women
hajj_public %>%
ivreg(x_s10dq1~hajj2006 + age + literate + ptygrp + female + urban | success +
age + literate + ptygrp + female, data=.) %>%
broom::tidy()
# Setup
rm(list = ls(all = TRUE))   # Removes objects from the previous session
## Packages
library(haven)  ## Package to read Stata data
library(ivreg) ## Package to run 2sls
library(fixest) ## This package can also run 2SLS
library(tidyverse) ## For tidyverse commands
library(memisc) ## For table outputting
## Loading Data
hajj_public <- read_dta("Data/hajj_public.dta")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
## OssamaIncorrect
hajj_public %>%
ivreg(x_s10bq4~hajj2006 + age + literate + ptygrp + female + urban | success +
age + literate + ptygrp + female + urban, data=.) %>%
broom::tidy()
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
Setup
bookdown::render_book("index.Rmd", "bookdown::gitbook")
load("~/GOVT702/Data/EgyptProtests.RData")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
library(plyr)
library(tidyverse)
library(readxl)
library(readr)
library(lubridate)
library(knitr)
knitr::opts_chunk$set(cache=TRUE, message=FALSE, warning=FALSE)
knitr::include_graphics("lab7_image.png")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
## Reading in stock data
stk <- read_csv("Data/stocks2020.csv",  col_names = TRUE)
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
## Packages for Lab VII
library(plyr)
library(tidyverse)
library(readxl)
library(readr)
library(lubridate)
library(knitr)
## Reading in stock data
stk <- read_csv("Data/stocks2020.csv",  col_names = TRUE)
## Reading in presidential market data
pres_mkt <- read_xlsx("Data/USPres_2020_Price History By Market -Bulk.xlsx", col_names = TRUE) %>%
rename("date" = "Date (ET)",
"name" = "Contract Name",
"price" = "Close Share Price")
, warning=FALSE, message=FALSE
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
## Creating daily price data for Trump
trump2020 <- pres_mkt %>%
filter(year(date) > 2019 & name == "Donald Trump") %>%
dplyr::select(c(date, "Trump" = price))
## Reading in stock data
stk <- read_csv("Data/stocks2020.csv",  col_names = TRUE)
## Reading in presidential market data
pres_mkt <- read_xlsx("Data/USPres_2020_Price History By Market -Bulk.xlsx", col_names = TRUE) %>%
rename("date" = "Date (ET)",
"name" = "Contract Name",
"price" = "Close Share Price")
## Creating daily price data for Trump
trump2020 <- pres_mkt %>%
filter(year(date) > 2019 & name == "Donald Trump") %>%
dplyr::select(c(date, "Trump" = price))
## Creating daily price data for Trump
trump2020 <- pres_mkt %>%
filter(year(date) == 2020 & name == "Donald Trump") %>%
dplyr::select(c(date, "Trump" = price))
## Packages for Lab VII
library(plyr)
library(tidyverse)
library(readxl)
library(readr)
library(lubridate)
library(knitr)
## Creating daily price data for Trump
trump2020 <- pres_mkt %>%
filter(year(date) > 2019 & name == "Donald Trump") %>%
dplyr::select(c(date, "Trump" = price))
year(date
year(date
year(date)
## Reading in presidential market data
pres_mkt <- read_xlsx("Data/USPres_2020_Price History By Market -Bulk.xlsx", col_names = TRUE) %>%
rename("date" = "Date (ET)",
"name" = "Contract Name",
"price" = "Close Share Price") %>%
mutate(date = as_date(date))
## Reading in presidential market data
pres_mkt <- read_xlsx("Data/USPres_2020_Price History By Market -Bulk.xlsx", col_names = TRUE) %>%
rename("date" = "Date (ET)",
"name" = "Contract Name",
"price" = "Close Share Price")
## Creating daily price data for Trump
trump2020 <- pres_mkt %>%
filter(year(date) > 2019 & name == "Donald Trump") %>%
dplyr::select(c(date, "Trump" = price))
## Creating daily price data for Trump
trump2020 <- pres_mkt %>%
filter(year(date) > 2019 & name == "Donald Trump") %>%
dplyr::select(c(date, "Trump" = price))
pres_mkt %>%
filter(year(date) > 2019 & name == "Donald Trump")
pres_mkt %>%
filter(year(Date) > 2019 & name == "Donald Trump") %>%
dplyr::select(c(date, "Trump" = price))
## Reading in presidential market data
pres_mkt <- read_xlsx("Data/USPres_2020_Price History By Market -Bulk.xlsx", col_names = TRUE) %>%
rename("date" = "Date (ET)",
"name" = "Contract Name",
"price" = "Close Share Price")
knitr::include_graphics("lab7_image.png")
## Packages for Lab VII
library(plyr)
library(tidyverse)
library(readxl)
library(readr)
library(lubridate)
library(knitr)
## Packages for Lab VII
library(plyr)
library(tidyverse)
library(readxl)
library(readr)
library(lubridate)
library(knitr)
## Reading in stock data
stk <- read_csv("Data/stocks2020.csv",  col_names = TRUE)
## Reading in presidential market data
pres_mkt <- read_xlsx("Data/USPres_2020_Price History By Market -Bulk.xlsx", col_names = TRUE) %>%
rename("date" = "Date (ET)",
"name" = "Contract Name",
"price" = "Close Share Price")
## Reading in stock data
stk <- read_csv("Data/stocks2020.csv",  col_names = TRUE)
## Reading in presidential market data
pres_mkt <- read_xlsx("Data/USPres_2020_Price History By Market -Bulk.xlsx", col_names = TRUE) %>%
rename("date" = "Date (ET)",
"name" = "Contract Name",
"price" = "Close Share Price")
## Creating list of ticker names
stk_tickers <-
c(names(stk)[!names(stk) %in% c("date", "DJI")])
## Creating number of stocks
stk_num <- length(stk_tickers)
## Joining the two datasets
stk_pres <- left_join(stk, trump2020, by = "date")
## Creating daily price data for Trump
trump2020 <- pres_mkt %>%
filter(year(date) > 2019 & name == "Donald Trump") %>%
dplyr::select(c(date, "Trump" = price))
## Creating daily price data for Trump
trump2020 <- pres_mkt %>%
filter(year(trump2020$date) > 2019 & name == "Donald Trump") %>%
dplyr::select(c(date, "Trump" = price))
## Creating daily price data for Trump
trump2020 <- pres_mkt %>%
filter(year(pres_mkt$date) > 2019 & name == "Donald Trump") %>%
dplyr::select(c(date, "Trump" = price))
## Creating daily price data for Trump
trump2020 <- pres_mkt %>%
filter(year(date) > 2019 & name == "Donald Trump") %>%
dplyr::select(c(date, "Trump" = price))
## Creating daily price data for Trump
trump2020 <- pres_mkt %>%
filter(date > 2019 & name == "Donald Trump") %>%
dplyr::select(c(date, "Trump" = price))
year(date)
pres_mkt$date
pres_mkt$date
pres_mkt$date
pres_mkt$date
View(pres_mkt)
## Reading in presidential market data
pres_mkt <- read_xlsx("Data/USPres_2020_Price History By Market -Bulk.xlsx", col_names = TRUE) %>%
rename("date" = "Date (ET)",
"name" = "Contract Name",
"price" = "Close Share Price")
View(pres_mkt)
## Reading in presidential market data
pres_mkt <- read_xlsx("Data/USPres_2020_Price History By Market -Bulk.xlsx", col_names = TRUE) %>%
mutate("date" = "Date (ET)",
"name" = "Contract Name",
"price" = "Close Share Price")
View(pres_mkt)
## Reading in presidential market data
pres_mkt <- read_xlsx("Data/USPres_2020_Price History By Market -Bulk.xlsx", col_names = TRUE) %>%
mutate(date = `Date (ET)`,
name = `Contract Name`,
price = `Close Share Price`)
View(pres_mkt)
## Reading in presidential market data
pres_mkt <- read_xlsx("Data/USPres_2020_Price History By Market -Bulk.xlsx", col_names = TRUE) %>%
mutate(date = `Date (ET)`,
name = `Contract Name`,
price = `Close Share Price`) %>%
select(-`Date (ET)`, `Contract Name`, `Close Share Price`)
## Reading in presidential market data
pres_mkt <- read_xlsx("Data/USPres_2020_Price History By Market -Bulk.xlsx", col_names = TRUE) %>%
mutate(date = `Date (ET)`,
name = `Contract Name`,
price = `Close Share Price`) %>%
dplyr::select(-`Date (ET)`, -`Contract Name`, -`Close Share Price`)
## Creating daily price data for Trump
trump2020 <- pres_mkt %>%
filter(year(date) > 2019 & name == "Donald Trump") %>%
dplyr::select(c(date, "Trump" = price))
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
## Joining the two datasets
stk_pres <- left_join(stk, trump2020, by = "date")
## Price Change Function
pct_change <- function(x){
(x - lag(x))/lag(x)
}
## Daily Change Dataset
daily_df <- stk_pres %>%
mutate_at(c("DJI", "Trump", stk_tickers), pct_change) %>%
select(c(date, c("DJI", "Trump", stk_tickers)))
## Price Change Function
pct_change <- function(x){
(x - lag(x))/lag(x)
}
## Daily Change Dataset
daily_df <- stk_pres %>%
mutate_at(c("DJI", "Trump", stk_tickers), pct_change) %>%
dplyr::select(c(date, c("DJI", "Trump", stk_tickers)))
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
force(b_test)
force(b_test)
force(b_test)
force(b_test)
force(balance_results)
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
