<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 9/23 | Lab I: Tidyverse &amp; OLS Review | GOVT 8002 Shared Working Book</title>
  <meta name="description" content="2 9/23 | Lab I: Tidyverse &amp; OLS Review | GOVT 8002 Shared Working Book" />
  <meta name="generator" content="bookdown 0.30 and GitBook 2.6.7" />

  <meta property="og:title" content="2 9/23 | Lab I: Tidyverse &amp; OLS Review | GOVT 8002 Shared Working Book" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 9/23 | Lab I: Tidyverse &amp; OLS Review | GOVT 8002 Shared Working Book" />
  
  
  

<meta name="author" content="Zoom Link for Office Hours | bfr11@georgetown.edu" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="lab-ii-dummy-variables-career-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#purpose-of-this-site"><i class="fa fa-check"></i><b>1.1</b> Purpose of This Site</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#loading-data"><i class="fa fa-check"></i><b>1.2</b> Loading Data</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="lab-i-tidyverse-ols-review.html"><a href="lab-i-tidyverse-ols-review.html"><i class="fa fa-check"></i><b>2</b> 9/23 | Lab I: Tidyverse &amp; OLS Review</a>
<ul>
<li class="chapter" data-level="2.1" data-path="lab-i-tidyverse-ols-review.html"><a href="lab-i-tidyverse-ols-review.html#join-the-data-sets."><i class="fa fa-check"></i><b>2.1</b> Join the data sets.</a></li>
<li class="chapter" data-level="2.2" data-path="lab-i-tidyverse-ols-review.html"><a href="lab-i-tidyverse-ols-review.html#create-and-add-the-following-variables-to-your-dataframe-density-deaths-per-capita-cases-per-capita-and-vaccinated-percent."><i class="fa fa-check"></i><b>2.2</b> Create and add the following variables to your dataframe density, deaths per capita, cases per capita and vaccinated percent.</a></li>
<li class="chapter" data-level="2.3" data-path="lab-i-tidyverse-ols-review.html"><a href="lab-i-tidyverse-ols-review.html#estimate-three-regression-models-with-deaths-per-capita-on-your-selected-day-as-the-dependent-variable."><i class="fa fa-check"></i><b>2.3</b> Estimate three regression models with deaths per capita on your selected day as the dependent variable.</a></li>
<li class="chapter" data-level="2.4" data-path="lab-i-tidyverse-ols-review.html"><a href="lab-i-tidyverse-ols-review.html#assess-specific-vaccines"><i class="fa fa-check"></i><b>2.4</b> Assess specific vaccines</a></li>
<li class="chapter" data-level="2.5" data-path="lab-i-tidyverse-ols-review.html"><a href="lab-i-tidyverse-ols-review.html#optional-lab-1b"><i class="fa fa-check"></i><b>2.5</b> Optional Lab 1b</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="lab-i-tidyverse-ols-review.html"><a href="lab-i-tidyverse-ols-review.html#load-the-world-values-survey-data-from-datawv7_small.csv-and-the-countrycode-data-from-datacountry-codes-for-wvs-wave-7.csv."><i class="fa fa-check"></i><b>2.5.1</b> Load the World Values Survey data from “Data/WV7_small.csv” and the CountryCode data from “Data/Country codes for WVS wave 7.csv”.</a></li>
<li class="chapter" data-level="2.5.2" data-path="lab-i-tidyverse-ols-review.html"><a href="lab-i-tidyverse-ols-review.html#join-the-country-name-from-the-countrycode-data-to-the-world-values-data.-the-country-code-is-v2-in-countrycode-and-b_country-in-the-world-values-data.-create-two-data-objects-of-the-countries-in-and-not-in-the-world-values-data.-display-the-first-10-countries-for-each-list."><i class="fa fa-check"></i><b>2.5.2</b> Join the country name from the CountryCode data to the World Values data. The country code is <em>V2</em> in CountryCode and <em>B_Country</em> in the World Values data. Create two data objects of the countries in and not in the World Values data. Display the first 10 countries for each list.</a></li>
<li class="chapter" data-level="2.5.3" data-path="lab-i-tidyverse-ols-review.html"><a href="lab-i-tidyverse-ols-review.html#using-pipes-calculate-the-percent-immigrant-in-every-country.-show-the-highest-10-and-lowest-10-countries.-be-sure-to-think-through-what-the-variable-in-the-data-set-means."><i class="fa fa-check"></i><b>2.5.3</b> Using pipes, calculate the percent immigrant in every country. Show the highest 10 and lowest 10 countries. (Be sure to think through what the variable in the data set means.)</a></li>
<li class="chapter" data-level="2.5.4" data-path="lab-i-tidyverse-ols-review.html"><a href="lab-i-tidyverse-ols-review.html#were-now-going-to-give-some-examples-of-the-kind-of-data-we-can-calculate.-think-about-how-you-would-do-this-in-excel-but-dont-actually-do-it-and-then-calculate-in-r.-calculate-the-percent-of-immigrants-who-are-men-by-country-and-show-the-highest-and-lowest-10-countries."><i class="fa fa-check"></i><b>2.5.4</b> We’re now going to give some examples of the kind of data we can calculate. Think about how you would do this in Excel (but don’t actually do it!) and then calculate in R. Calculate the percent of immigrants who are men, by country and show the highest and lowest 10 countries.</a></li>
<li class="chapter" data-level="2.5.5" data-path="lab-i-tidyverse-ols-review.html"><a href="lab-i-tidyverse-ols-review.html#group-by-marital-status-and-country-and-show-the-percent-of-people-in-each-category-who-are-men.-show-the-results-for-a-country-of-your-choice-and-briefly-discuss-what-it-means-when-the-percentages-in-each-category-are-not-roughly-50-percent.-recall-that-the-coding-for-the-marital-variable-is-1-married-2-living-together-as-married-3-divorced-4-separated-5-widowed-6-single."><i class="fa fa-check"></i><b>2.5.5</b> Group by marital status and country and show the percent of people in each category who are men. Show the results for a country of your choice and briefly discuss what it means when the percentages in each category are not roughly 50 percent. Recall that the coding for the <em>Marital</em> variable is 1 = Married 2 = Living together as married 3 = Divorced 4 = Separated 5 = Widowed 6 = Single.</a></li>
<li class="chapter" data-level="2.5.6" data-path="lab-i-tidyverse-ols-review.html"><a href="lab-i-tidyverse-ols-review.html#come-up-with-your-own-alternatives-think-about-some-possible-subset-of-people-and-some-information-we-have-about-them-and-see-if-you-can-write-code-to-capture-that-information."><i class="fa fa-check"></i><b>2.5.6</b> Come up with your own alternatives: think about some possible subset of people and some information we have about them and see if you can write code to capture that information.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lab-ii-dummy-variables-career-data.html"><a href="lab-ii-dummy-variables-career-data.html"><i class="fa fa-check"></i><b>3</b> 9/30 | Lab II: Dummy Variables &amp; Career Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="lab-ii-dummy-variables-career-data.html"><a href="lab-ii-dummy-variables-career-data.html#use-ols-to-estimate-the-difference-in-happiness-the-happy-variable-for-married-versus-unmarried-people.-then-use-the-t-test-function-to-assess-the-difference-in-happiness-by-gender-see-the-computing-corner-in-chapter-6-of-the-book.-discuss-similarities-and-differences-in-ols-model-and-t-test-function-results"><i class="fa fa-check"></i><b>3.1</b> Use OLS to estimate the difference in happiness (the “happy” variable) for married versus unmarried people. Then use the t test function to assess the difference in happiness by gender (see the Computing Corner in Chapter 6 of the book). Discuss similarities and differences in OLS model and t test function results</a></li>
<li class="chapter" data-level="3.2" data-path="lab-ii-dummy-variables-career-data.html"><a href="lab-ii-dummy-variables-career-data.html#use-ols-with-robust-standard-errors-to-estimate-the-difference-in-happiness-for-married-and-unmarried-people.-then-use-the-t-test-function-with-unequal-variances-to-assess-the-difference-in-happiness-by-marital-status.-discuss-similarities-and-differences-in-ols-model-and-t-test-function-results."><i class="fa fa-check"></i><b>3.2</b> Use OLS with robust standard errors to estimate the difference in happiness for married and unmarried people. Then use the t test function with unequal variances to assess the difference in happiness by marital status. Discuss similarities and differences in OLS model and t test function results.</a></li>
<li class="chapter" data-level="3.3" data-path="lab-ii-dummy-variables-career-data.html"><a href="lab-ii-dummy-variables-career-data.html#create-an-interaction-between-married-and-age.-estimate-a-model-that-explains-happiness-as-a-function-of-age-and-marital-status-allowing-for-the-age-effect-to-differ-according-to-marital-status.-for-simplicity-we-use-only-married-and-unmarried-for-marital-status.-what-is-the-effect-of-age-for-unmarried-people-for-married-people"><i class="fa fa-check"></i><b>3.3</b> Create an interaction between married and age. Estimate a model that explains happiness as a function of age and marital status, allowing for the age effect to differ according to marital status. (For simplicity, we use only married and unmarried for marital status.) What is the effect of age for unmarried people? For married people?</a></li>
<li class="chapter" data-level="3.4" data-path="lab-ii-dummy-variables-career-data.html"><a href="lab-ii-dummy-variables-career-data.html#estimate-separate-models-explaining-happiness-in-terms-of-age-for-married-and-unmarried-people.-comment-on-similarities-and-differences-compared-to-results-immediately-above-for-i-the-estimated-effect-of-age-and-ii-the-intercept."><i class="fa fa-check"></i><b>3.4</b> Estimate separate models explaining happiness in terms of age for married and unmarried people. Comment on similarities and differences compared to results immediately above for (i) the estimated effect of age and (ii) the intercept.</a></li>
<li class="chapter" data-level="3.5" data-path="lab-ii-dummy-variables-career-data.html"><a href="lab-ii-dummy-variables-career-data.html#marianne-bertrand-wrote-an-article-called-work-on-womens-work-is-never-done-career-family-and-the-well-being-of-college-educated-women-published-in-the-american-economic-review-papers-proceedings-2013-1033-244250.-she-analyzed-the-effect-of-careers-and-family-on-college-educated-women.-she-defines-a-career-variable-that-is-1-if-someones-earnings-are-above-the-twenty-fifth-percentile-in-the-relevant-year-and-age-group.-estimate-a-model-in-which-happiness-is-a-function-of-career-being-married-and-an-interaction-of-career-and-married-careermarried.-to-match-betrands-analysis-limit-the-data-to-only-to-college-educated-dtaeducat4-women-dtasex2.-interpret-the-estimated-average-happiness-for-the-four-types-of-women-implied-by-this-analysis."><i class="fa fa-check"></i><b>3.5</b> Marianne Bertrand wrote an article called ``Work on Women’s Work is Never Done: Career, Family, and the Well-Being of College-Educated Women’’ published in the <em>American Economic Review: Papers &amp; Proceedings</em> 2013, 103(3): 244–250. She analyzed the effect of careers and family on college-educated women. She defines a career variable that is 1 if someone’s earnings are above the twenty-fifth percentile in the relevant year and age group. Estimate a model in which happiness is a function of career, being married and an interaction of career and married (“careermarried”). To match Betrand’s analysis, limit the data to only to college educated (dta$educat==4) women (dta$sex==2). Interpret the estimated average happiness for the four types of women implied by this analysis.</a></li>
<li class="chapter" data-level="3.6" data-path="lab-ii-dummy-variables-career-data.html"><a href="lab-ii-dummy-variables-career-data.html#the-gss-provides-a-race-variable-dtarace.-the-variable-equals-1-for-white-respondents-2-for-black-respondents-and-3-for-everyone-else.-add-race-to-the-above-model-and-interpret-the-coefficients-related-to-race.-estimate-another-model-with-a-different-reference-category-and-explain-coefficients-across-the-two-models."><i class="fa fa-check"></i><b>3.6</b> The GSS provides a race variable (dta$race). The variable equals 1 for white respondents, 2 for black respondents and 3 for everyone else. Add race to the above model and interpret the coefficients related to race. Estimate another model with a different reference category and explain coefficients across the two models.</a></li>
<li class="chapter" data-level="3.7" data-path="lab-ii-dummy-variables-career-data.html"><a href="lab-ii-dummy-variables-career-data.html#estimate-a-model-similar-to-the-above-but-for-a-different-group-of-your-choice-e.g.-limit-by-race-or-gender-or-education-and-feel-free-to-include-different-covariates."><i class="fa fa-check"></i><b>3.7</b> Estimate a model similar to the above, but for a different group of your choice (e.g., limit by race or gender or education) and feel free to include different covariates.</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lab-iii-panel-data.html"><a href="lab-iii-panel-data.html"><i class="fa fa-check"></i><b>4</b> 2/6 | Lab III: Panel Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="lab-iii-panel-data.html"><a href="lab-iii-panel-data.html#a-load-the-data-from-oxcgrt_latest.csv"><i class="fa fa-check"></i><b>4.1</b> 1a) Load the data from OxCGRT_latest.csv</a></li>
<li class="chapter" data-level="4.2" data-path="lab-iii-panel-data.html"><a href="lab-iii-panel-data.html#b-data-organization"><i class="fa fa-check"></i><b>4.2</b> 1b) Data organization</a></li>
<li class="chapter" data-level="4.3" data-path="lab-iii-panel-data.html"><a href="lab-iii-panel-data.html#use-the-lag-function-in-dplyr-to-create-lagged-variables-for-cases-and-deaths.-also-create-difference-e.g.-dcases-that-is-the-change-in-cases-for-each-state-by-date.-check-to-make-sure-it-worked."><i class="fa fa-check"></i><b>4.3</b> 2) Use the lag function in dplyr to create lagged variables for cases and deaths. Also create “difference” (e.g., dCases) that is the change in cases for each state by date. Check to make sure it worked.</a></li>
<li class="chapter" data-level="4.4" data-path="lab-iii-panel-data.html"><a href="lab-iii-panel-data.html#merge-the-above-data-frame-to-data-in-usstates.xlsx"><i class="fa fa-check"></i><b>4.4</b> 3) Merge the above data frame to data in <em>USstates.xlsx</em></a></li>
<li class="chapter" data-level="4.5" data-path="lab-iii-panel-data.html"><a href="lab-iii-panel-data.html#write-in-notation-and-estimate-a-pooled-model-of-total-cases-as-a-function-of-state-policy.-discuss-possible-bias."><i class="fa fa-check"></i><b>4.5</b> 4) Write in notation and estimate a pooled model of total cases as a function of state policy. Discuss possible bias.</a></li>
<li class="chapter" data-level="4.6" data-path="lab-iii-panel-data.html"><a href="lab-iii-panel-data.html#write-in-notation-and-estimate-a-one-way-fixed-effect-model-where-the-fixed-effect-is-state.-are-you-still-worried-about-bias"><i class="fa fa-check"></i><b>4.6</b> 5) Write in notation and estimate a one-way fixed effect model where the fixed effect is state. Are you still worried about bias?</a></li>
<li class="chapter" data-level="4.7" data-path="lab-iii-panel-data.html"><a href="lab-iii-panel-data.html#a-write-in-notation-and-estimate-a-two-way-fixed-effect-model-where-the-fixed-effects-are-state-and-date.-does-this-model-address-the-source-of-bias-identified-earlier"><i class="fa fa-check"></i><b>4.7</b> 6a) Write in notation and estimate a two-way fixed effect model where the fixed effects are state and date. Does this model address the source of bias identified earlier?</a></li>
<li class="chapter" data-level="4.8" data-path="lab-iii-panel-data.html"><a href="lab-iii-panel-data.html#b-test-a-model-with-robust-clustered-standard-errors.-do-the-results-change-at-all"><i class="fa fa-check"></i><b>4.8</b> 6b) Test a model with robust-clustered standard errors. Do the results change at all?</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="lab-iii-panel-data.html"><a href="lab-iii-panel-data.html#this-is-an-initial-analysis.-we-would-also-want-to"><i class="fa fa-check"></i><b>4.8.1</b> This is an initial analysis. We would also want to</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="lab-iii-panel-data.html"><a href="lab-iii-panel-data.html#load-in-the-texas-school-board-data-and-take-a-look-at-the-variables.-the-next-few-questions-are-from-exercise-5-in-bailey-2021.-the-basic-thoery-of-the-paper-is-that-teachers-unions-will-have-less-influence-on-school-board-members-when-turnout-is-greater-since-a-wider-swath-of-voters-non-teachers-will-be-voting.-you-can-read-the-abstract-below."><i class="fa fa-check"></i><b>4.9</b> 7) Load in the Texas School Board Data and take a look at the variables. The next few questions are from exercise 5 in Bailey (2021). The basic thoery of the paper is that teachers unions will have less influence on school board members when turnout is greater since a wider swath of voters (non-teachers) will be voting. You can read the abstract below.</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="lab-iii-panel-data.html"><a href="lab-iii-panel-data.html#paper-abstract-many-governments-in-the-united-states-hold-elections-on-days-other-than-national-election-day.-recent-studies-have-argued-that-the-low-voter-turnout-that-accompanies-such-off-cycle-elections-could-create-an-advantage-for-interest-groups.-however-the-endogeneity-of-election-timing-makes-it-difficult-to-estimate-its-causal-effect-on-political-outcomes.-in-this-paper-i-develop-a-theoretical-framework-that-explains-how-changes-to-election-timing-affect-the-electoral-fortunes-of-organized-interest-groups.-i-test-the-theory-examining-the-effects-of-a-2006-texas-law-that-forced-approximately-20-percent-of-the-states-school-by-districts-to-move-their-elections-to-the-same-day-as-national-elections."><i class="fa fa-check"></i><b>4.9.1</b> Paper Abstract: Many governments in the United States hold elections on days other than national Election Day. Recent studies have argued that the low voter turnout that accompanies such off-cycle elections could create an advantage for interest groups. However, the endogeneity of election timing makes it difficult to estimate its causal effect on political outcomes. In this paper, I develop a theoretical framework that explains how changes to election timing affect the electoral fortunes of organized interest groups. I test the theory examining the effects of a 2006 Texas law that forced approximately 20 percent of the state’s school by districts to move their elections to the same day as national elections.</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="lab-iii-panel-data.html"><a href="lab-iii-panel-data.html#write-in-notation-and-estimate-the-pooled-model-of-the-effect-of-oncycle-on-lnavgsalary."><i class="fa fa-check"></i><b>4.10</b> 8) Write in notation and estimate the pooled model of the effect of OnCycle on LnAvgSalary.</a></li>
<li class="chapter" data-level="4.11" data-path="lab-iii-panel-data.html"><a href="lab-iii-panel-data.html#write-in-notation-and-estimate-a-difference-in-difference-model-of-the-effect-of-oncycle-on-lnavgsalary.-what-is-the-key-coefficient-that-we-are-interested-in"><i class="fa fa-check"></i><b>4.11</b> 9) Write in notation and estimate a difference-in-difference model of the effect of OnCycle on LnAvgSalary. What is the key coefficient that we are interested in?</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">GOVT 8002 Shared Working Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lab-i-tidyverse-ols-review" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> 9/23 | Lab I: Tidyverse &amp; OLS Review<a href="lab-i-tidyverse-ols-review.html#lab-i-tidyverse-ols-review" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><img src="lab_1_image.png" width="1720" /></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="lab-i-tidyverse-ols-review.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Preparation</span></span>
<span id="cb1-2"><a href="lab-i-tidyverse-ols-review.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="lab-i-tidyverse-ols-review.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-4"><a href="lab-i-tidyverse-ols-review.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-5"><a href="lab-i-tidyverse-ols-review.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stargazer)</span>
<span id="cb1-6"><a href="lab-i-tidyverse-ols-review.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car)</span></code></pre></div>
<div id="join-the-data-sets." class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Join the data sets.<a href="lab-i-tidyverse-ols-review.html#join-the-data-sets." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Join the cases and vaccination data by date and state.
<ul>
<li><p>Case data: <a href="#id_%20https://data.cdc.gov/Case-Surveillance/United-States-COVID-19-Cases-and-Deaths-by-State-o/9mfq-cb36">United_States_COVID-19_Cases_and_Deaths_by_State_over_Time.csv</a></p></li>
<li><p>Vaccination data: <a href="https://data.cdc.gov/Vaccinations/COVID-19-Vaccinations-in-the-United-States-Jurisdi/unsk-b7fc">COVID-19_Vaccinations_in_the_United_States_Jurisdiction.csv</a></p></li>
<li><p>Other state variables: USstates.xlsx</p></li>
</ul></li>
<li>Add the USstates.xlsx data and limit your dataframe to the states listed in USstates.xlsx.<br />
</li>
<li>How do you know if your merge was successful?</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="lab-i-tidyverse-ols-review.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Loading Case Data</span></span>
<span id="cb2-2"><a href="lab-i-tidyverse-ols-review.html#cb2-2" aria-hidden="true" tabindex="-1"></a>case <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/United_States_COVID-19_Cases_and_Deaths_by_State_over_Time.csv&quot;</span>)</span>
<span id="cb2-3"><a href="lab-i-tidyverse-ols-review.html#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="lab-i-tidyverse-ols-review.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Loading Vax Data </span></span>
<span id="cb2-5"><a href="lab-i-tidyverse-ols-review.html#cb2-5" aria-hidden="true" tabindex="-1"></a>vax <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/COVID-19_Vaccinations_in_the_United_States_Jurisdiction.csv&quot;</span>)</span>
<span id="cb2-6"><a href="lab-i-tidyverse-ols-review.html#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="lab-i-tidyverse-ols-review.html#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Joining Case &amp; Vax</span></span>
<span id="cb2-8"><a href="lab-i-tidyverse-ols-review.html#cb2-8" aria-hidden="true" tabindex="-1"></a>case_vax <span class="ot">&lt;-</span> case <span class="sc">%&gt;%</span></span>
<span id="cb2-9"><a href="lab-i-tidyverse-ols-review.html#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(vax, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;submission_date&quot;</span> <span class="ot">=</span> <span class="st">&quot;Date&quot;</span>, <span class="st">&quot;state&quot;</span> <span class="ot">=</span> <span class="st">&quot;Location&quot;</span>))</span>
<span id="cb2-10"><a href="lab-i-tidyverse-ols-review.html#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="lab-i-tidyverse-ols-review.html#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Adding in state variables</span></span>
<span id="cb2-12"><a href="lab-i-tidyverse-ols-review.html#cb2-12" aria-hidden="true" tabindex="-1"></a>states <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;Data/USstates.xlsx&quot;</span>)</span>
<span id="cb2-13"><a href="lab-i-tidyverse-ols-review.html#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="lab-i-tidyverse-ols-review.html#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="do">## Joining all datasets to create df</span></span>
<span id="cb2-15"><a href="lab-i-tidyverse-ols-review.html#cb2-15" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> case_vax <span class="sc">%&gt;%</span></span>
<span id="cb2-16"><a href="lab-i-tidyverse-ols-review.html#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">%in%</span> states<span class="sc">$</span>stateAbbr) <span class="sc">%&gt;%</span></span>
<span id="cb2-17"><a href="lab-i-tidyverse-ols-review.html#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(states, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;state&quot;</span> <span class="ot">=</span> <span class="st">&quot;stateAbbr&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-18"><a href="lab-i-tidyverse-ols-review.html#cb2-18" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="do">## making variable names lowercase with underscores</span></span>
<span id="cb2-19"><a href="lab-i-tidyverse-ols-review.html#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="lab-i-tidyverse-ols-review.html#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="do">## Checking for only states</span></span>
<span id="cb2-21"><a href="lab-i-tidyverse-ols-review.html#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(<span class="fu">tibble</span>(<span class="fu">unique</span>(df<span class="sc">$</span>state)))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##       n
##   &lt;int&gt;
## 1    51</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="lab-i-tidyverse-ols-review.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="do">## View(df)</span></span></code></pre></div>
<p>To use <code>janitor::clean_names()</code> above, be sure to install the <code>janitor</code> package with <code>install.packages("janitor")</code></p>
</div>
<div id="create-and-add-the-following-variables-to-your-dataframe-density-deaths-per-capita-cases-per-capita-and-vaccinated-percent." class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Create and add the following variables to your dataframe density, deaths per capita, cases per capita and vaccinated percent.<a href="lab-i-tidyverse-ols-review.html#create-and-add-the-following-variables-to-your-dataframe-density-deaths-per-capita-cases-per-capita-and-vaccinated-percent." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>For a specific day, show the top five states ranked by deaths per capita and calculate the average vaccinated per capita and the mean, minimum and maximum deaths per capita.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="lab-i-tidyverse-ols-review.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Creating Variables</span></span>
<span id="cb5-2"><a href="lab-i-tidyverse-ols-review.html#cb5-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="lab-i-tidyverse-ols-review.html#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">&quot;deaths_pc&quot;</span> <span class="ot">=</span> <span class="dv">100000</span><span class="sc">*</span>new_death<span class="sc">/</span>pop2019, </span>
<span id="cb5-4"><a href="lab-i-tidyverse-ols-review.html#cb5-4" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;cases_pc&quot;</span>  <span class="ot">=</span> <span class="dv">100000</span><span class="sc">*</span>new_case<span class="sc">/</span>pop2019,</span>
<span id="cb5-5"><a href="lab-i-tidyverse-ols-review.html#cb5-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;vaxed_pct&quot;</span>  <span class="ot">=</span> series_complete_12plus_pop_pct<span class="sc">/</span><span class="dv">100</span>,</span>
<span id="cb5-6"><a href="lab-i-tidyverse-ols-review.html#cb5-6" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;density&quot;</span>   <span class="ot">=</span> pop2019<span class="sc">/</span>(<span class="dv">1000000</span><span class="sc">*</span>sq_miles))</span>
<span id="cb5-7"><a href="lab-i-tidyverse-ols-review.html#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="lab-i-tidyverse-ols-review.html#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Filtering to specific day</span></span>
<span id="cb5-9"><a href="lab-i-tidyverse-ols-review.html#cb5-9" aria-hidden="true" tabindex="-1"></a>df_day <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb5-10"><a href="lab-i-tidyverse-ols-review.html#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(submission_date <span class="sc">==</span> <span class="st">&quot;10/1/2021&quot;</span>)</span>
<span id="cb5-11"><a href="lab-i-tidyverse-ols-review.html#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="lab-i-tidyverse-ols-review.html#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="do">## Top five states by deaths per capita</span></span>
<span id="cb5-13"><a href="lab-i-tidyverse-ols-review.html#cb5-13" aria-hidden="true" tabindex="-1"></a>df_day <span class="sc">%&gt;%</span></span>
<span id="cb5-14"><a href="lab-i-tidyverse-ols-review.html#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(deaths_pc)) <span class="sc">%&gt;%</span></span>
<span id="cb5-15"><a href="lab-i-tidyverse-ols-review.html#cb5-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(submission_date, state, deaths_pc, cases_pc, vaxed_pct, density) <span class="sc">%&gt;%</span></span>
<span id="cb5-16"><a href="lab-i-tidyverse-ols-review.html#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 6
##   submission_date state deaths_pc cases_pc vaxed_pct   density
##   &lt;chr&gt;           &lt;chr&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 10/1/2021       WV         2.90     91.8     0.465 0.0000746
## 2 10/1/2021       OH         2.81     53.3     0.588 0.000286 
## 3 10/1/2021       GA         1.49     31.5     0.537 0.000185 
## 4 10/1/2021       ID         1.34     99.5     0     0.0000216
## 5 10/1/2021       ND         1.31     93.3     0.529 0.0000110</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="lab-i-tidyverse-ols-review.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Mean vaxed per capita and mean, min, max of deaths per capita</span></span>
<span id="cb7-2"><a href="lab-i-tidyverse-ols-review.html#cb7-2" aria-hidden="true" tabindex="-1"></a>df_day <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="lab-i-tidyverse-ols-review.html#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_vaxed =</span> <span class="fu">mean</span>(vaxed_pct),</span>
<span id="cb7-4"><a href="lab-i-tidyverse-ols-review.html#cb7-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean_deaths =</span> <span class="fu">mean</span>(deaths_pc),</span>
<span id="cb7-5"><a href="lab-i-tidyverse-ols-review.html#cb7-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">min_deaths =</span> <span class="fu">min</span>(deaths_pc),</span>
<span id="cb7-6"><a href="lab-i-tidyverse-ols-review.html#cb7-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">max_deaths =</span> <span class="fu">max</span>(deaths_pc))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   mean_vaxed mean_deaths min_deaths max_deaths
##        &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
## 1      0.625       0.551          0       2.90</code></pre>
</div>
<div id="estimate-three-regression-models-with-deaths-per-capita-on-your-selected-day-as-the-dependent-variable." class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Estimate three regression models with deaths per capita on your selected day as the dependent variable.<a href="lab-i-tidyverse-ols-review.html#estimate-three-regression-models-with-deaths-per-capita-on-your-selected-day-as-the-dependent-variable." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Your first model will have only Trump 2020 percent as an independent variable.</li>
<li>Your second model will add vaccinated percent as an independent variable.</li>
<li>Your third model will add density.</li>
<li>Before you estimate the models, write down your expectations about what will happen in these models.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="lab-i-tidyverse-ols-review.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Trump percent model</span></span>
<span id="cb9-2"><a href="lab-i-tidyverse-ols-review.html#cb9-2" aria-hidden="true" tabindex="-1"></a>ols<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fu">lm</span>(deaths_pc <span class="sc">~</span> trump2020_percent, <span class="at">data =</span> df_day)</span>
<span id="cb9-3"><a href="lab-i-tidyverse-ols-review.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ols<span class="fl">.1</span>)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = deaths_pc ~ trump2020_percent, data = df_day)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -0.8844 -0.3200 -0.0929  0.1714  2.1889 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(&gt;|t|)  
## (Intercept)         -0.241      0.342   -0.70    0.484  
## trump2020_percent    1.610      0.676    2.38    0.021 *
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.57 on 49 degrees of freedom
## Multiple R-squared:  0.104,  Adjusted R-squared:  0.0855 
## F-statistic: 5.68 on 1 and 49 DF,  p-value: 0.0211</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="lab-i-tidyverse-ols-review.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Trump and Vax model</span></span>
<span id="cb11-2"><a href="lab-i-tidyverse-ols-review.html#cb11-2" aria-hidden="true" tabindex="-1"></a>ols<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">lm</span>(deaths_pc <span class="sc">~</span> trump2020_percent <span class="sc">+</span> vaxed_pct, <span class="at">data =</span> df_day)</span>
<span id="cb11-3"><a href="lab-i-tidyverse-ols-review.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ols<span class="fl">.2</span>)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = deaths_pc ~ trump2020_percent + vaxed_pct, data = df_day)
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
## -0.876 -0.260 -0.105  0.131  2.171 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(&gt;|t|)  
## (Intercept)          1.591      0.854    1.86    0.068 .
## trump2020_percent    0.325      0.851    0.38    0.704  
## vaxed_pct           -1.921      0.826   -2.32    0.024 *
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.55 on 48 degrees of freedom
## Multiple R-squared:  0.194,  Adjusted R-squared:  0.161 
## F-statistic: 5.79 on 2 and 48 DF,  p-value: 0.00557</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="lab-i-tidyverse-ols-review.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Trump, Vax, and Density Model</span></span>
<span id="cb13-2"><a href="lab-i-tidyverse-ols-review.html#cb13-2" aria-hidden="true" tabindex="-1"></a>ols<span class="fl">.3</span> <span class="ot">&lt;-</span> <span class="fu">lm</span>(deaths_pc <span class="sc">~</span> trump2020_percent <span class="sc">+</span> vaxed_pct <span class="sc">+</span> density, <span class="at">data =</span> df_day)</span>
<span id="cb13-3"><a href="lab-i-tidyverse-ols-review.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ols<span class="fl">.3</span>)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = deaths_pc ~ trump2020_percent + vaxed_pct + density, 
##     data = df_day)
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
## -0.886 -0.258 -0.110  0.130  2.170 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(&gt;|t|)  
## (Intercept)          1.516      1.049    1.44    0.155  
## trump2020_percent    0.418      1.131    0.37    0.713  
## vaxed_pct           -1.879      0.899   -2.09    0.042 *
## density              8.206     64.687    0.13    0.900  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.56 on 47 degrees of freedom
## Multiple R-squared:  0.195,  Adjusted R-squared:  0.143 
## F-statistic: 3.79 on 3 and 47 DF,  p-value: 0.0163</code></pre>
<p>The results of <code>ols.1</code>, using October 1st, 2021 as the day, indicate that area with higher support for Donald Trump have more deaths per capita, specifically, a one percentage increase in Trump’s 2020 vote share, on average, increases deaths per capita by 1.6. This is a classic case of omitted variable bias, however. Once we control for the percent vaxed in an area, the <code>trump2020_percent</code> loses statistical significance. We can see in the second model that the coefficient on the Trump vote share variable greatly decreases and is no longer statistically significant at conventional thresholds. <code>vaxed_pct</code> is statistically significant at the <span class="math inline">\(p&lt;.05\)</span> level and indicates that a one percent increase in an areas vaccination rate corresponds, on average, with a 1.9 decrease in deaths per capita, holding <code>trump2020_percent</code> constant. This result stands even when controlling for an areas density as shown in model 3.</p>
</div>
<div id="assess-specific-vaccines" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Assess specific vaccines<a href="lab-i-tidyverse-ols-review.html#assess-specific-vaccines" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>Create and add vaccinated percent by state for each of the Pfizer, Modern and Janssen (which is Johnson and Johnson) vaccines.</p></li>
<li><p>Use <em>pop2019</em> for population</p></li>
<li><p>Use Series_Complete_Moderna_18Plus, Series_Complete_Janssen_18Plus and Series_Complete_Pfizer_18Plus for the vaccination totals.</p></li>
<li><p>Estimate a model in which deaths per capita is a function of all three vaccination rates.</p></li>
<li><p>Explain what the results mean, especially in light of the results above for overall vaccination results.</p></li>
<li><p>Explain how one would compare the efficacy of the individual vaccines (e.g., whether the Moderna vaccine works better than the Johnson and Johnson vaccine). Many answers would work here.</p></li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="lab-i-tidyverse-ols-review.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Creating vaxed percent variables for different vaccines</span></span>
<span id="cb15-2"><a href="lab-i-tidyverse-ols-review.html#cb15-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="lab-i-tidyverse-ols-review.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vaxed_pct_moderna  =</span> series_complete_moderna_18plus<span class="sc">/</span>(<span class="dv">100</span><span class="sc">*</span>pop2019),</span>
<span id="cb15-4"><a href="lab-i-tidyverse-ols-review.html#cb15-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">vaxed_pct_jans  =</span> series_complete_janssen_18plus<span class="sc">/</span>(<span class="dv">100</span><span class="sc">*</span>pop2019),</span>
<span id="cb15-5"><a href="lab-i-tidyverse-ols-review.html#cb15-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">vaxed_pct_pfizer  =</span> series_complete_pfizer_18plus<span class="sc">/</span>(<span class="dv">100</span><span class="sc">*</span>pop2019))</span>
<span id="cb15-6"><a href="lab-i-tidyverse-ols-review.html#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="lab-i-tidyverse-ols-review.html#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Filtering to day</span></span>
<span id="cb15-8"><a href="lab-i-tidyverse-ols-review.html#cb15-8" aria-hidden="true" tabindex="-1"></a>df_day <span class="ot">=</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb15-9"><a href="lab-i-tidyverse-ols-review.html#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(submission_date <span class="sc">==</span> <span class="st">&quot;10/1/2021&quot;</span>)</span>
<span id="cb15-10"><a href="lab-i-tidyverse-ols-review.html#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="lab-i-tidyverse-ols-review.html#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Running Model</span></span>
<span id="cb15-12"><a href="lab-i-tidyverse-ols-review.html#cb15-12" aria-hidden="true" tabindex="-1"></a>ols<span class="fl">.4</span> <span class="ot">&lt;-</span> <span class="fu">lm</span>(deaths_pc <span class="sc">~</span> vaxed_pct_jans <span class="sc">+</span> vaxed_pct_moderna <span class="sc">+</span></span>
<span id="cb15-13"><a href="lab-i-tidyverse-ols-review.html#cb15-13" aria-hidden="true" tabindex="-1"></a>             vaxed_pct_pfizer, <span class="at">data =</span> df_day)</span>
<span id="cb15-14"><a href="lab-i-tidyverse-ols-review.html#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ols<span class="fl">.4</span>)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = deaths_pc ~ vaxed_pct_jans + vaxed_pct_moderna + 
##     vaxed_pct_pfizer, data = df_day)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -0.9388 -0.2940 -0.0526  0.1528  2.1338 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(&gt;|t|)   
## (Intercept)          2.374      0.679    3.50    0.001 **
## vaxed_pct_jans    -570.304   1174.009   -0.49    0.629   
## vaxed_pct_moderna -359.090    586.494   -0.61    0.543   
## vaxed_pct_pfizer  -321.407    333.845   -0.96    0.341   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.55 on 47 degrees of freedom
## Multiple R-squared:  0.195,  Adjusted R-squared:  0.144 
## F-statistic: 3.81 on 3 and 47 DF,  p-value: 0.016</code></pre>
<table style="text-align:center">
<caption>
<strong>Lab I OLS Results</strong>
</caption>
<tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
Model 1
</td>
<td>
Model 2
</td>
<td>
Model 3
</td>
<td>
Model 4
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1)
</td>
<td>
(2)
</td>
<td>
(3)
</td>
<td>
(4)
</td>
</tr>
<tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
trump2020_percent
</td>
<td>
1.600
</td>
<td>
0.320
</td>
<td>
0.420
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.680)
</td>
<td>
(0.850)
</td>
<td>
(1.100)
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
t = 2.400
</td>
<td>
t = 0.380
</td>
<td>
t = 0.370
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
vaxed_pct
</td>
<td>
</td>
<td>
-1.900
</td>
<td>
-1.900
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
(0.830)
</td>
<td>
(0.900)
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
t = -2.300
</td>
<td>
t = -2.100
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
density
</td>
<td>
</td>
<td>
</td>
<td>
8.200
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
(65.000)
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
t = 0.130
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
vaxed_pct_jans
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
-570.000
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
(1,174.000)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
t = -0.490
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
vaxed_pct_moderna
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
-359.000
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
(586.000)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
t = -0.610
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
vaxed_pct_pfizer
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
-321.000
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
(334.000)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
t = -0.960
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Constant
</td>
<td>
-0.240
</td>
<td>
1.600
</td>
<td>
1.500
</td>
<td>
2.400
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.340)
</td>
<td>
(0.850)
</td>
<td>
(1.000)
</td>
<td>
(0.680)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
t = -0.700
</td>
<td>
t = 1.900
</td>
<td>
t = 1.400
</td>
<td>
t = 3.500
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
51
</td>
<td>
51
</td>
<td>
51
</td>
<td>
51
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
0.100
</td>
<td>
0.190
</td>
<td>
0.200
</td>
<td>
0.200
</td>
</tr>
<tr>
<td style="text-align:left">
Residual Std. Error
</td>
<td>
0.570 (df = 49)
</td>
<td>
0.550 (df = 48)
</td>
<td>
0.560 (df = 47)
</td>
<td>
0.550 (df = 47)
</td>
</tr>
<tr>
<td style="text-align:left">
F Statistic
</td>
<td>
5.700<sup>**</sup> (df = 1; 49)
</td>
<td>
5.800<sup>***</sup> (df = 2; 48)
</td>
<td>
3.800<sup>**</sup> (df = 3; 47)
</td>
<td>
3.800<sup>**</sup> (df = 3; 47)
</td>
</tr>
<tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td colspan="4" style="text-align:right">
<sup><em></sup>p&lt;0.1; <sup><strong></sup>p&lt;0.05; <sup></strong></em></sup>p&lt;0.01
</td>
</tr>
</table>
<p>The results are no longer statistically significance due to multicollinearity. There is a high degree of correlation between the rates each vaccine were administered which is contributing to the large standard errors. The p-value of the <span class="math inline">\(F\)</span>-statistic tells us the probability that we would see a result this extreme given all of the coefficients on the vaccines are actually zero, reinforcing our findings above.</p>
<p>This is not necessary for this lab, but to assess the efficacy of one vaccine over another, we could conduct an <span class="math inline">\(F\)</span> test. Remember, the formula for F-tests is: <span class="math display">\[F_{q, N-k} = \frac{(R^2_{Unrestricted}-R^2_{Restricted})\setminus q}{(1-R^2_{Unrestricted}) \setminus (N-k)}\]</span></p>
<p>As an example, I will evaluate if <span class="math inline">\(\beta_1 = \beta_2\)</span> in the following model: <span class="math inline">\(deaths_pc_{it} = \beta_0 + \beta_1jans_{it} + \beta_2moderna_{it} + \beta_3pfizer_{it} + \epsilon_i\)</span> which is <code>ols.4</code> estimated above that examines the relationship between the rate of vaccination for each vaccine and deaths per capita in state <span class="math inline">\(i\)</span> and day <span class="math inline">\(t\)</span>. We can do this manually, but <code>library(car)</code> makes it easy. See the code below:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="lab-i-tidyverse-ols-review.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="do">## F Test </span></span>
<span id="cb17-2"><a href="lab-i-tidyverse-ols-review.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">linearHypothesis</span>(ols<span class="fl">.4</span>, <span class="fu">c</span>(<span class="st">&quot;vaxed_pct_jans = vaxed_pct_moderna&quot;</span>))</span></code></pre></div>
<pre><code>## Linear hypothesis test
## 
## Hypothesis:
## vaxed_pct_jans - vaxed_pct_moderna = 0
## 
## Model 1: restricted model
## Model 2: deaths_pc ~ vaxed_pct_jans + vaxed_pct_moderna + vaxed_pct_pfizer
## 
##   Res.Df  RSS Df Sum of Sq    F Pr(&gt;F)
## 1     48 14.4                         
## 2     47 14.4  1   0.00568 0.02   0.89</code></pre>
<p>We can see that the <span class="math inline">\(p\)</span>-value is not statistically significant, meaning that we cannot reject the null hypothesis that <span class="math inline">\(\beta_1\)</span> is statistically significantly different than <span class="math inline">\(\beta_2\)</span>.</p>
</div>
<div id="optional-lab-1b" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Optional Lab 1b<a href="lab-i-tidyverse-ols-review.html#optional-lab-1b" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This lab is optional and just for some additional practice.</p>
<div id="load-the-world-values-survey-data-from-datawv7_small.csv-and-the-countrycode-data-from-datacountry-codes-for-wvs-wave-7.csv." class="section level3 hasAnchor" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Load the World Values Survey data from “Data/WV7_small.csv” and the CountryCode data from “Data/Country codes for WVS wave 7.csv”.<a href="lab-i-tidyverse-ols-review.html#load-the-world-values-survey-data-from-datawv7_small.csv-and-the-countrycode-data-from-datacountry-codes-for-wvs-wave-7.csv." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The codebook for the World Values Survey data is available at
<a href="http://www.worldvaluessurvey.org/WVSDocumentationWV7.jsp" class="uri">http://www.worldvaluessurvey.org/WVSDocumentationWV7.jsp</a></p>
<p>The variables in WV_small were created as follows:</p>
<ul>
<li>Satisfaction with your life from 1 (completely dissatisfied) to 10 (completely satisfied) (<em>V23</em>)</li>
<li>Income: a country-specific scale ranging from 1 (lowest income category) to 10 (highest income category) (<em>V239</em> in the dataset)</li>
<li>Education: a scale ranging from 1 (no formal education) to 9 (a degree from a university) (<em>V248</em> in the dataset)</li>
<li>Country: based on <em>V2</em> in the dataset. See “Country codes for WVS wave 6.csv”</li>
<li>Conservatism: self-identified political conservatism from 1 (most liberal) to 10 (most conservative) (<em>V95</em> in the data set)</li>
<li>Male: a dummy variable indicating male (<em>V240</em>)</li>
<li>Religious: Indicating how often the individual attends religious services ranging from 1 (almost never) to 7 (more than once a week) (this is a re-coding of <em>V145</em> that had the polarity reversed, but is harder to interpret)</li>
<li>Marital: Marital status 1 = Married 2 = Living together as married 3 = Divorced 4 = Separated 5 = Widowed 6 = Single</li>
<li>Survey year: year survey taken</li>
<li>Birth year: respondent’s year of birth</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="lab-i-tidyverse-ols-review.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">## World Values Dataset</span></span>
<span id="cb19-2"><a href="lab-i-tidyverse-ols-review.html#cb19-2" aria-hidden="true" tabindex="-1"></a>wv <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/WV7_small.csv&quot;</span>)</span>
<span id="cb19-3"><a href="lab-i-tidyverse-ols-review.html#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="lab-i-tidyverse-ols-review.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Country Codes</span></span>
<span id="cb19-5"><a href="lab-i-tidyverse-ols-review.html#cb19-5" aria-hidden="true" tabindex="-1"></a>cc <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/Country codes for WVS wave 7.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="join-the-country-name-from-the-countrycode-data-to-the-world-values-data.-the-country-code-is-v2-in-countrycode-and-b_country-in-the-world-values-data.-create-two-data-objects-of-the-countries-in-and-not-in-the-world-values-data.-display-the-first-10-countries-for-each-list." class="section level3 hasAnchor" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Join the country name from the CountryCode data to the World Values data. The country code is <em>V2</em> in CountryCode and <em>B_Country</em> in the World Values data. Create two data objects of the countries in and not in the World Values data. Display the first 10 countries for each list.<a href="lab-i-tidyverse-ols-review.html#join-the-country-name-from-the-countrycode-data-to-the-world-values-data.-the-country-code-is-v2-in-countrycode-and-b_country-in-the-world-values-data.-create-two-data-objects-of-the-countries-in-and-not-in-the-world-values-data.-display-the-first-10-countries-for-each-list." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="lab-i-tidyverse-ols-review.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Left Join</span></span>
<span id="cb20-2"><a href="lab-i-tidyverse-ols-review.html#cb20-2" aria-hidden="true" tabindex="-1"></a>wv <span class="ot">&lt;-</span> wv <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="lab-i-tidyverse-ols-review.html#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(cc, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;B_COUNTRY&quot;</span> <span class="ot">=</span> <span class="st">&quot;V2&quot;</span>))</span>
<span id="cb20-4"><a href="lab-i-tidyverse-ols-review.html#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="lab-i-tidyverse-ols-review.html#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Showing countries in</span></span>
<span id="cb20-6"><a href="lab-i-tidyverse-ols-review.html#cb20-6" aria-hidden="true" tabindex="-1"></a>countries_in_wv <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="fu">unique</span>(wv<span class="sc">$</span>country))</span>
<span id="cb20-7"><a href="lab-i-tidyverse-ols-review.html#cb20-7" aria-hidden="true" tabindex="-1"></a>countries_in_wv[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span></code></pre></div>
<pre><code>## # A tibble: 10 × 1
##    `unique(wv$country)`
##    &lt;chr&gt;               
##  1 Ethiopia            
##  2 Zimbabwe            
##  3 Tajikistan          
##  4 Pakistan            
##  5 Bangladesh          
##  6 Nigeria             
##  7 Myanmar             
##  8 Kyrgyzstan          
##  9 Nicaragua           
## 10 Viet Nam</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="lab-i-tidyverse-ols-review.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Anti Join</span></span>
<span id="cb22-2"><a href="lab-i-tidyverse-ols-review.html#cb22-2" aria-hidden="true" tabindex="-1"></a>countries_out <span class="ot">&lt;-</span> cc <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="lab-i-tidyverse-ols-review.html#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(wv, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;V2&quot;</span> <span class="ot">=</span> <span class="st">&quot;B_COUNTRY&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="lab-i-tidyverse-ols-review.html#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(V2 <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb22-5"><a href="lab-i-tidyverse-ols-review.html#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="lab-i-tidyverse-ols-review.html#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Countries not in wv</span></span>
<span id="cb22-7"><a href="lab-i-tidyverse-ols-review.html#cb22-7" aria-hidden="true" tabindex="-1"></a>countries_out <span class="sc">%&gt;%</span></span>
<span id="cb22-8"><a href="lab-i-tidyverse-ols-review.html#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 2
##       V2 country       
##    &lt;dbl&gt; &lt;chr&gt;         
##  1     8 Albania       
##  2    12 Algeria       
##  3    16 American Samoa
##  4    24 Angola        
##  5    28 Antigua       
##  6    31 Azerbaijan    
##  7    40 Austria       
##  8    48 Bahrain       
##  9    51 Armenia       
## 10    52 Barbados</code></pre>
</div>
<div id="using-pipes-calculate-the-percent-immigrant-in-every-country.-show-the-highest-10-and-lowest-10-countries.-be-sure-to-think-through-what-the-variable-in-the-data-set-means." class="section level3 hasAnchor" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> Using pipes, calculate the percent immigrant in every country. Show the highest 10 and lowest 10 countries. (Be sure to think through what the variable in the data set means.)<a href="lab-i-tidyverse-ols-review.html#using-pipes-calculate-the-percent-immigrant-in-every-country.-show-the-highest-10-and-lowest-10-countries.-be-sure-to-think-through-what-the-variable-in-the-data-set-means." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="lab-i-tidyverse-ols-review.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Recoding Immigrant Variable</span></span>
<span id="cb24-2"><a href="lab-i-tidyverse-ols-review.html#cb24-2" aria-hidden="true" tabindex="-1"></a>wv<span class="sc">$</span>Immigrant <span class="ot">&lt;-</span> wv<span class="sc">$</span>Immigrant<span class="dv">-1</span></span>
<span id="cb24-3"><a href="lab-i-tidyverse-ols-review.html#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="lab-i-tidyverse-ols-review.html#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Highest</span></span>
<span id="cb24-5"><a href="lab-i-tidyverse-ols-review.html#cb24-5" aria-hidden="true" tabindex="-1"></a>wv <span class="sc">%&gt;%</span></span>
<span id="cb24-6"><a href="lab-i-tidyverse-ols-review.html#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb24-7"><a href="lab-i-tidyverse-ols-review.html#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">pct_imm =</span> <span class="fu">mean</span>(Immigrant, <span class="at">na.rm=</span>T), <span class="at">n=</span><span class="fu">n</span>())<span class="sc">%&gt;%</span></span>
<span id="cb24-8"><a href="lab-i-tidyverse-ols-review.html#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pct_imm)) <span class="sc">%&gt;%</span></span>
<span id="cb24-9"><a href="lab-i-tidyverse-ols-review.html#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##    country       pct_imm     n
##    &lt;chr&gt;           &lt;dbl&gt; &lt;int&gt;
##  1 Andorra         0.723  1004
##  2 Macao           0.417  1023
##  3 Hong Kong       0.261  2075
##  4 New Zealand     0.227  1057
##  5 China           0.221  3036
##  6 Cyprus (G)      0.22   1000
##  7 Germany         0.139  1528
##  8 Jordan          0.138  1203
##  9 Greece          0.106  1200
## 10 United States   0.106  2596</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="lab-i-tidyverse-ols-review.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Lowest</span></span>
<span id="cb26-2"><a href="lab-i-tidyverse-ols-review.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Percent immigrant in each country</span></span>
<span id="cb26-3"><a href="lab-i-tidyverse-ols-review.html#cb26-3" aria-hidden="true" tabindex="-1"></a>wv <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="lab-i-tidyverse-ols-review.html#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb26-5"><a href="lab-i-tidyverse-ols-review.html#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">pct_imm =</span> <span class="fu">mean</span>(Immigrant, <span class="at">na.rm=</span>T), <span class="at">n=</span><span class="fu">n</span>())<span class="sc">%&gt;%</span></span>
<span id="cb26-6"><a href="lab-i-tidyverse-ols-review.html#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(pct_imm) <span class="sc">%&gt;%</span></span>
<span id="cb26-7"><a href="lab-i-tidyverse-ols-review.html#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##    country     pct_imm     n
##    &lt;chr&gt;         &lt;dbl&gt; &lt;int&gt;
##  1 Bangladesh 0         1200
##  2 Iraq       0         1200
##  3 Mexico     0         1739
##  4 Myanmar    0         1200
##  5 Thailand   0         1500
##  6 Viet Nam   0         1200
##  7 Egypt      0.000833  1200
##  8 Indonesia  0.000938  3200
##  9 Romania    0.00159   1257
## 10 Ethiopia   0.00163   1230</code></pre>
</div>
<div id="were-now-going-to-give-some-examples-of-the-kind-of-data-we-can-calculate.-think-about-how-you-would-do-this-in-excel-but-dont-actually-do-it-and-then-calculate-in-r.-calculate-the-percent-of-immigrants-who-are-men-by-country-and-show-the-highest-and-lowest-10-countries." class="section level3 hasAnchor" number="2.5.4">
<h3><span class="header-section-number">2.5.4</span> We’re now going to give some examples of the kind of data we can calculate. Think about how you would do this in Excel (but don’t actually do it!) and then calculate in R. Calculate the percent of immigrants who are men, by country and show the highest and lowest 10 countries.<a href="lab-i-tidyverse-ols-review.html#were-now-going-to-give-some-examples-of-the-kind-of-data-we-can-calculate.-think-about-how-you-would-do-this-in-excel-but-dont-actually-do-it-and-then-calculate-in-r.-calculate-the-percent-of-immigrants-who-are-men-by-country-and-show-the-highest-and-lowest-10-countries." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="lab-i-tidyverse-ols-review.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Highest</span></span>
<span id="cb28-2"><a href="lab-i-tidyverse-ols-review.html#cb28-2" aria-hidden="true" tabindex="-1"></a>wv <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="lab-i-tidyverse-ols-review.html#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Male<span class="sc">==</span><span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="lab-i-tidyverse-ols-review.html#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb28-5"><a href="lab-i-tidyverse-ols-review.html#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">pct_imm =</span> <span class="fu">mean</span>(Immigrant, <span class="at">na.rm=</span>T), <span class="at">n=</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb28-6"><a href="lab-i-tidyverse-ols-review.html#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pct_imm)) <span class="sc">%&gt;%</span></span>
<span id="cb28-7"><a href="lab-i-tidyverse-ols-review.html#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##    country       pct_imm     n
##    &lt;chr&gt;           &lt;dbl&gt; &lt;int&gt;
##  1 Andorra         0.784   495
##  2 Macao           0.443   572
##  3 Hong Kong       0.257  1123
##  4 China           0.223  1667
##  5 New Zealand     0.220   594
##  6 Cyprus (G)      0.191   518
##  7 Jordan          0.154   596
##  8 Germany         0.145   785
##  9 Greece          0.111   637
## 10 United States   0.103  1206</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="lab-i-tidyverse-ols-review.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Lowest</span></span>
<span id="cb30-2"><a href="lab-i-tidyverse-ols-review.html#cb30-2" aria-hidden="true" tabindex="-1"></a>wv <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="lab-i-tidyverse-ols-review.html#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Male<span class="sc">==</span><span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="lab-i-tidyverse-ols-review.html#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb30-5"><a href="lab-i-tidyverse-ols-review.html#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">pct_imm =</span> <span class="fu">mean</span>(Immigrant, <span class="at">na.rm=</span>T), <span class="at">n=</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb30-6"><a href="lab-i-tidyverse-ols-review.html#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(pct_imm) <span class="sc">%&gt;%</span></span>
<span id="cb30-7"><a href="lab-i-tidyverse-ols-review.html#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##    country    pct_imm     n
##    &lt;chr&gt;        &lt;dbl&gt; &lt;int&gt;
##  1 Bangladesh 0         608
##  2 Egypt      0         579
##  3 Iraq       0         592
##  4 Mexico     0         866
##  5 Myanmar    0         599
##  6 Nigeria    0         604
##  7 Thailand   0         793
##  8 Viet Nam   0         655
##  9 Indonesia  0.00114  1754
## 10 Romania    0.00132   760</code></pre>
</div>
<div id="group-by-marital-status-and-country-and-show-the-percent-of-people-in-each-category-who-are-men.-show-the-results-for-a-country-of-your-choice-and-briefly-discuss-what-it-means-when-the-percentages-in-each-category-are-not-roughly-50-percent.-recall-that-the-coding-for-the-marital-variable-is-1-married-2-living-together-as-married-3-divorced-4-separated-5-widowed-6-single." class="section level3 hasAnchor" number="2.5.5">
<h3><span class="header-section-number">2.5.5</span> Group by marital status and country and show the percent of people in each category who are men. Show the results for a country of your choice and briefly discuss what it means when the percentages in each category are not roughly 50 percent. Recall that the coding for the <em>Marital</em> variable is 1 = Married 2 = Living together as married 3 = Divorced 4 = Separated 5 = Widowed 6 = Single.<a href="lab-i-tidyverse-ols-review.html#group-by-marital-status-and-country-and-show-the-percent-of-people-in-each-category-who-are-men.-show-the-results-for-a-country-of-your-choice-and-briefly-discuss-what-it-means-when-the-percentages-in-each-category-are-not-roughly-50-percent.-recall-that-the-coding-for-the-marital-variable-is-1-married-2-living-together-as-married-3-divorced-4-separated-5-widowed-6-single." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="lab-i-tidyverse-ols-review.html#cb32-1" aria-hidden="true" tabindex="-1"></a>wv <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="lab-i-tidyverse-ols-review.html#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country, Marital) <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="lab-i-tidyverse-ols-review.html#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">male_pct =</span> <span class="fu">mean</span>(Male, <span class="at">na.rm=</span>T), <span class="at">n=</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb32-4"><a href="lab-i-tidyverse-ols-review.html#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;United States&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 7 × 4
## # Groups:   country [1]
##   country       Marital male_pct     n
##   &lt;chr&gt;           &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;
## 1 United States       1    0.431  1296
## 2 United States       2    0.548   197
## 3 United States       3    0.493   278
## 4 United States       4    0.5      54
## 5 United States       5    0.560    84
## 6 United States       6    0.477   677
## 7 United States      NA    0.6      10</code></pre>
</div>
<div id="come-up-with-your-own-alternatives-think-about-some-possible-subset-of-people-and-some-information-we-have-about-them-and-see-if-you-can-write-code-to-capture-that-information." class="section level3 hasAnchor" number="2.5.6">
<h3><span class="header-section-number">2.5.6</span> Come up with your own alternatives: think about some possible subset of people and some information we have about them and see if you can write code to capture that information.<a href="lab-i-tidyverse-ols-review.html#come-up-with-your-own-alternatives-think-about-some-possible-subset-of-people-and-some-information-we-have-about-them-and-see-if-you-can-write-code-to-capture-that-information." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="lab-i-tidyverse-ols-review.html#cb34-1" aria-hidden="true" tabindex="-1"></a>wv <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="lab-i-tidyverse-ols-review.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country, Income) <span class="sc">%&gt;%</span></span>
<span id="cb34-3"><a href="lab-i-tidyverse-ols-review.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">imm_pct =</span> <span class="fu">mean</span>(Immigrant, <span class="at">na.rm=</span>T), <span class="at">n=</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb34-4"><a href="lab-i-tidyverse-ols-review.html#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;United States&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 11 × 4
## # Groups:   country [1]
##    country       Income imm_pct     n
##    &lt;chr&gt;          &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;
##  1 United States      1  0.106    123
##  2 United States      2  0.072    128
##  3 United States      3  0.0871   268
##  4 United States      4  0.0867   373
##  5 United States      5  0.110    599
##  6 United States      6  0.111    468
##  7 United States      7  0.110    370
##  8 United States      8  0.142    151
##  9 United States      9  0.111     36
## 10 United States     10  0.227     22
## 11 United States     NA  0.136     58</code></pre>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lab-ii-dummy-variables-career-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
